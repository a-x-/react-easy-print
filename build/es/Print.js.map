{"version":3,"sources":["../../src/Print.jsx"],"names":["React","PropTypes","PrintProvider","debug","propTypes","name","string","children","node","isRequired","main","bool","single","exclusive","printOnly","contextTypes","childContextTypes","Print","props","state","printOffsetLeft","printOffsetTop","isSingle","context","printProvider","regPrintable","window","matchMedia","onchange","bodyRect","document","body","getBoundingClientRect","elem","printElement","elemRect","left","top","setState","unregPrintable","main_","s","excl_","isPrint","matches","offset_","marginTop","marginLeft","el","root","Component"],"mappings":"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","file":"Print.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PrintProvider from './PrintProvider';\nimport { debug } from './common';\nimport s from './Print.css';\n\nconst propTypes = {\n  name: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  main: PropTypes.bool,\n  single: PropTypes.bool,\n  exclusive: PropTypes.bool,\n  printOnly: PropTypes.bool\n};\nconst contextTypes = PrintProvider.childContextTypes;\n\nexport default class Print extends React.Component {\n\n  constructor(props){\n    super(props);\n\n    this.state = {\n      printOffsetLeft: 0,\n      printOffsetTop: 0\n    };\n  }\n  componentDidMount() {\n\n    if (this.props.name) {\n      debug('init printable', this.props.name);\n      const isSingle = (this.props.main || this.props.single);\n      this.context.printProvider && this.context.printProvider.regPrintable(this.props.name, <Print {...this.props} />, isSingle);\n    }\n\n    if (this.props.main || this.props.single) {\n\n      window.matchMedia('print').onchange = () => {\n        const bodyRect = document.body.getBoundingClientRect();\n        const elem = this.printElement;\n        const elemRect = elem && elem.getBoundingClientRect();\n        const printOffsetLeft = elemRect && (elemRect.left - bodyRect.left);\n        const printOffsetTop = elemRect && (elemRect.top - bodyRect.top);\n\n        this.setState({\n          printOffsetTop,\n          printOffsetLeft,\n        });\n      };\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.name) {\n      debug('remove printable', this.props.name);\n      this.context.printProvider && this.context.printProvider.unregPrintable(this.props.name);\n    }\n\n    if (this.props.main || this.props.single) {\n      window.matchMedia('print').onchange = null;\n    }\n  }\n\n  render() {\n\n    const { children, main, single, exclusive, printOnly } = this.props;\n    const { printOffsetLeft, printOffsetTop } = this.state;\n    const main_ = (main || single) ? s.main : '';\n    const excl_ = (exclusive || printOnly) ? s.exclusive : '';\n    const isPrint = window.matchMedia('print').matches;\n    const offset_ = ((printOffsetTop || printOffsetLeft ) && main_ && isPrint) ? { marginTop: -printOffsetTop, marginLeft: -printOffsetLeft} : {marginTop: 0, marginLeft: 0};\n    return <div ref={ (el) => this.printElement = el } style={offset_} className={`${s.root} ${main_} ${excl_}`}>{children}</div>;\n  }\n}\nPrint.propTypes = propTypes;\nPrint.contextTypes = contextTypes;\n"]}